{% load static %}

<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Secreto Heladería</title>
  
  <!-- Bootstrap (CDN minimal mono) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <style>
    /* --- Layout base --- */
    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh; /* ocupa toda la pantalla */
    }

    main {
      flex: 1; /* empuja el footer al fondo */
    }

    /* --- Footer siempre abajo --- */
    footer {
      margin-top: auto; /* esto lo mantiene al fondo del body */
      width: 100%;
    }

    /* --- Estilo monocromo simple --- */
    body {
      background: #f8f9fa;
      color: #222;
    }

    .card {
      border-radius: 8px;
    }

    .badge-crit {
      background: #d9534f;
      color: white;
    }

    .badge-high {
      background: #f0ad4e;
      color: white;
    }

    .badge-medium {
      background: #5bc0de;
      color: white;
    }
  </style>

</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    {% load permisos_extras %}
    <div class="container">
      <a class="navbar-brand" href="{% url 'dashboard' %}">Secreto Heladería</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'dashboard' %}">Productos</a>
          </li>
          {% if request.user|tiene_grupo:"Admin" %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'reportes_ventas' %}">Reportes</a>
          </li>
          {% endif %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'lista_clientes' %}">Clientes</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'lista_ventas' %}">Ventas</a>
          </li>
        </ul>
        <ul class="navbar-nav ms-auto">
          {% if user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'perfil_usuario' %}">{{ user.username }}</a>
              </a>
            </li>
            <li class="nav-item">
              <form action="{% url 'logout' %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-light btn-sm">Logout</button>
              </form>
            </li>
          {% else %}
            <li class="nav-item">
              <a class="btn btn-outline-light btn-sm me-2" href="{% url 'login' %}">Login</a>
            </li>
            <li class="nav-item">
              <a class="btn btn-light btn-sm" href="{% url 'register' %}">Register</a>
            </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container my-4">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-dark text-white py-3 mt-5">
    <div class="container d-flex justify-content-between">
      <div>© {{ now.year }} Secreto Heladería</div>
      <div><a class="text-white" href="#">Soporte</a></div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
